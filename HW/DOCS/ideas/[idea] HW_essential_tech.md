### HW

- **소유**
    - 한 web 계정이 한 로봇만 소유
- **카메라**
    - 실시간 스트리밍 with youtube live
    - 영상 인식으로 아이 감지
    - 아이를 대체할 인형 등을 OpenCV로 학습시키기
    - 학습시킨 게 화면 정중앙에 올 수 있도록 보행 방향 조정(목은 고정, 몸 방향 자체를 바꿔야 함)
- **보행**
    - 보행 상태는 로봇 내에서만 관여(DB에 올리지 않음)
    - 웹에서 방향 조정 명령이 들어오면 보행 방향 변경
    - 웹에서 오는 방향 조정 변경은 DB를 통해서가 아니라 라즈베리파이와 직접 통신을 통해 들어옴(MQTT 등)
    - 앞으로, 뒤로, 정지, 왼쪽, 오른쪽, 가운데 보행 수행
    - 초음파 센서로 너무 가까워지면 멈춤
- **움직임**
    - 음성 인식으로 아이가 하라고 명령을 하면 함
    - [가능]
        - 손
        - 앉아
        - 점프
        - Look (다리 고정)
            - 위 보기
            - 아래 보기
            - +) 고개 끄덕임 (위/아래 연결) 혹은 전신 움직임..
    - [아마 가능]
        - 엎드려
    - 있는 기능을 조합해서 새로운 움직임을 만드는 것까지만 필수에서 진행
    - 이 때 해금된 움직임만 보여줌
    - DB에 움직임 리스트, 가능 여부를 넣지 말고 HW에서 직접 처리
- **마이크**
    - 마이크에서 음성 받아서 google tts로 텍스트로 변환
    - 변환된 텍스트에서 특정 명령어 찾기
        - 명령어 기준 parsing
    - 보행, 움직임 관련 명령어
    
    ---
    
    - 음성 메시지는 귀에 있는 버튼을 눌러 시작 & 끝 표시(귀에 있는 버튼을 눌러 메시지를 말한 후 다시 버튼을 누르면 되는 형식)
    - 녹음된 음성 메시지가 S3에 저장됨
    - S3에 저장된 음성 메시지는 로봇에서는 삭제
    - 새로운 음성 메시지가 발생했다는 걸 웹에 직접적인 통신을 통해 보냄, 이 때 S3에 저장됨 path 등 정보를 줌
    
    ---
    
    - 부모님이 음성 메시지를 녹음해서 저장했다면 라즈베리파이에 직접 통신을 통해 새로운 음성 메시지가 있음을 알림
    - S3에서 새로운 음성 메시지를 다운 받아옴, 이 때 S3에 저장된 path 등 정보를 줌
    - 스피커를 통해 송출
    - 다음 새로운 메시지가 오면 이전 메시지는 삭제
- **스피커**
    - 부모님이 보낸 음성 전달
        - S3에서 가져온 음성 파일 송출
    - 친밀도에 따른 인사말
        - 
- **센서**
    - 온습도 센서 : 센싱 값 웹에 표시
    - 가스 센서 : 유해 가스 탐지
    - 초음파 센서 (고글) : 장애물에 근접하게 되면 정지
    - OLED (눈) : 감정 표현 & 시간 표현
    - 터치 센서
        - 터치를 5번(?) 하면 친밀도 오르는 방식
    - 일정 주기 마다 온습도, 가스센서 값 DB에 저장
        - 센싱은 1분에 한 번 진행
        - DB에서는 하루 치(??) 값을 그래프로 확인할 수 있음
        - 24 * 60 개의 row만 유지
- **남은 배터리양**
    - 전압 값을 DB에 송신
    - 일정 주기 마다
        - 센서 값이랑 같이 보내기
    - 최대 전압(8.4)~최소 전압(7.0)을 알아내기
    - 전압 값 자체 DB에 보내기
    - esp32에서 serial 통신을 통해 RPI에 보내주면 RPI에서 DB에 올림
    - 충전중일때는 어떻게 표시할지 생각해야
- **웹이랑 연결**
    - wifi 연결
    - 특정 유튜브 라이브 아이디로 영상, 음성 데이터 송출
    - S3, server 랑 연결
    - 가능하다면 QR 코드를 이용하여 자동으로 진행되도록
    - 안 된다면 시연에서는 그냥 연결된 상태를 가정하고 진행
- **친밀도**
    - 높이는 방법
        - ~~부모님에게 메세지 전송(원래는 비밀이야기하는 친구 컨셉이어서 나오는 아이디어)~~
        - ~~충전시키기~~
        - 동작시간 🎃🎉
        - **움직임 명령어 사용 횟수🐿️👀🎉🦉**
        - **쓰다듬기 🦉 🎃👀🐿️**
        - ~~특정 말을 했을때 (사랑해 등)~~
    - 일정 주기마다 DB에 저장
        - 로그 등은 DB에 올리지 말고 로봇에서 연산을 모두 한 후 그 시각 기준 친밀도/경험치만 DB에 저장
        - 1분에 한 번씩
- 전원
    - 전원 키는 버튼
    - 전원이 켜지면 스트리밍이 자동으로 시작, 스트리밍은 전원이 켜져있는 동안 멈추지 않고 쭉 지속됨
    - 절전 기능
        - 웹에서 설정
        - 웹에서 라즈베리파이와 직접 통신을 통해 절전 모드를 보내면 모션 인식 등 기능 꺼버림
        - 스트리밍 기능은 유지
        - OLED에 현재 시간 표시